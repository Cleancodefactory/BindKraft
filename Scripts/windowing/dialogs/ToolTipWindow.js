function ToolTipWindow(parentwnd,conf){BaseObject.apply(this,arguments);this.configuration=conf;this.parentwnd=parentwnd;}ToolTipWindow.Inherit(BaseObject,"ToolTipWindow");ToolTipWindow.prototype.configuration=null;ToolTipWindow.prototype.parentwnd=null;ToolTipWindow.prototype.placement=null;ToolTipWindow.prototype.tooltip=null;ToolTipWindow.prototype.element=null;ToolTipWindow.prototype.userOp=null;ToolTipWindow.prototype.$clearUserOp=function(){if(BaseObject.is(this.userOp,"Operation")){if(!this.userOp.isOperationComplete()){this.userOp.CompleteOperation(true,{});}}this.userOp=null;};ToolTipWindow.prototype.innerOp=null;ToolTipWindow.prototype.isOpened=function(){return BaseObject.is(this.tooltip,"BaseWindow");}.Description("Indicates if the tooltip window is created (usually true after the first use.");ToolTipWindow.prototype.expire=function(){this.placement=null;this.element=null;if(BaseObject.is(this.tooltip,"BaseWindow")){this.tooltip.setWindowStyles(WindowStyleFlags.visible,"reset");}if(this.innerOp!=null){if(!this.innerOp.isOperationComplete())this.innerOp.CompleteOperation(false,IOperation.errorname("unspecified"));this.innerOp=null;}}.Description("The tip shown at the moment expires and the tooltip window hides, but remains ready for consequent usages.");ToolTipWindow.prototype.$completeInnerOp=function(op){};ToolTipWindow.prototype.showTip=function(el,tiptext){var op=new ChunkedOperation();var innerOp=new Operation();if(this.tooltip==null){this.innerOp=this.openTipWindow();innerOp=this.innerOp;}else{innerOp.completeOperation(true,{});}innerOp.then(this.thisCall(function(o){if(o.isOperationSuccessful()){if(BaseObject.is(this.tooltip,"BaseWindow")){}else{op.CompleteOperation(false,IOperation.errorname("unspecified"));}}else{this.tooltip=null;this.expire();op.CompleteOperation(false,IOperation.errorname("unspecified"));}}));return op;};ToolTipWindow.prototype.openTipWindow=function(){this.tooltip=new SimpleViewWindow(this.configuration.template,WindowStyleFlags.visible|WindowStyleFlags.draggable|WindowStyleFlags.topmost|WindowStyleFlags.adjustclient,this.$calcTipPositionPosition(placement),this.parentwnd,{view:'<div data-class="TrivialView" data-bind-text="{read path=caption}" style="background-color: #FFFF40; color: #000000"></div>',directData:{caption:"Tooltip",description:"And this is the description ..."},on_FirstShown:function(msg){msg.target.activateWindow();},on_Destroy:this.thisCall(function(msg){this.tooltip=null;})});};ToolTipWindow.prototype.this.$calcTipPositionPosition=function(){return this.calcRect(this.element,new Size(200,50),this.placement);};PopDialog.prototype.calcRect=function(el,size){var el_cont=this.parentwnd.get_clientcontainer();var el_rect=Rect.fromBoundingClientRectangle(el);el_rect.x=el_rect.y=0;var anchorrect=el_rect.mapFromToElements(el,null);var cont_rect=Rect.fromBoundingClientRectangle(el_cont);var sz=new Rect(0,0,300,350);if(size)sz.set_size(size);var r=cont_rect.adjustPopUp(anchorrect,sz,"aboveunder",0,0);return r.mapFromToElements(null,el_cont);};