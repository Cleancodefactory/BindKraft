function IActionRuleContextConstructorImpl(){}IActionRuleContextConstructorImpl.InterfaceImpl(IActionRuleContextConstructor,"IActionRuleContextConstructorImpl");IActionRuleContextConstructorImpl.classInitialize=function(cls,customContextBuilder,finishOperation){cls.onStructuralQuery("BuildActionRuleContextQuery",function(query,procInst){if(query.processContext(this)===true)return true;});if(Class.is(cls,"IApp")){cls.prototype.prepareActionRuleContext=function(context,purpose){context.logicalContainer=this;if(Class.is(cls,"IDataHolder")){context.logicalContainerDataContext=this.get_data();}if(customContextBuilder!=null&&typeof customContextBuilder=="function"){customContextBuilder.call(this,context,purpose);}if(finishOperation===true)return true;}.CopyDocFrom(IActionRuleContextConstructor.prepareActionRuleContext);}else if(Class.is(cls,"BaseWindow")){cls.prototype.prepareActionRuleContext=function(context,purpose){context.logicalContainer=this;context.logicalContainerDataContext=this.get_data();if(customContextBuilder!=null&&typeof customContextBuilder=="function"){customContextBuilder.call(this,context,purpose);}if(finishOperation===true)return true;}.CopyDocFrom(IActionRuleContextConstructor.prepareActionRuleContext);}else if(Class.is(cls,"Base")&&!Class.is(cls,ITemplateRoot)){cls.prototype.prepareActionRuleContext=function(context,purpose){var view=this.getRelatedElements("__view");if(view!=null&&view.length>0){context.visualContainerElement=view.get(0);context.visualContainer=view.activeclass();if(BaseObject.is(context.visualContainer,"Base")){context.visualDataContext=context.visualContainer.get_data();}}if(customContextBuilder!=null&&typeof customContextBuilder=="function"){customContextBuilder.call(this,context,purpose);}if(finishOperation===true)return true;}.CopyDocFrom(IActionRuleContextConstructor.prepareActionRuleContext);}else if(Class.is(cls,"ITemplateRoot")){if(Class.is(cls,"Base")){cls.prototype.prepareActionRuleContext=function(context,purpose){context.visualContainer=this;context.visualContainerElement=this.root;context.visualDataContext=this.get_data();if(customContextBuilder!=null&&typeof customContextBuilder=="function"){customContextBuilder.call(this,context,purpose);}if(finishOperation===true)return true;}.CopyDocFrom(IActionRuleContextConstructor.prepareActionRuleContext);}else{return;}}else{if(customContextBuilder!=null&&typeof customContextBuilder=="function"){cls.prototype.prepareActionRuleContext=customContextBuilder;cls.prototype.prepareActionRuleContext.CopyDocFrom(IActionRuleContextConstructor.prepareActionRuleContext);}}};