(function(){var GRect=Class("GRect"),TrackMathBase=Class("TrackMathBase"),GPoint=Class("GPoint");function TrackRectInRect(outer,inner,anchor){TrackMathBase.apply(this,arguments);if(BaseObject.is(outer,"IGRect")){this.$outer=outer;}else if(outer instanceof HTMLElement){this.$outer=GRect.fromDOMElementClientViewport(outer);}if(BaseObject.is(inner,"IGRect")){this.$inner=inner;}else if(inner instanceof HTMLElement){this.$inner=GRect.fromDOMElementViewport(inner);}if(BaseObject.is(anchor,"IGPoint")){this.$anchor=anchor;}else if(anchor instanceof MouseEvent){var pt=new GPoint(anchor.clientX,anchor.clientY);this.$anchor=pt.mapFromTo(null,this.$inner);}}TrackRectInRect.Inherit(TrackMathBase,"TrackRectInRect");TrackRectInRect.prototype.$inner=null;TrackRectInRect.prototype.$outer=null;TrackRectInRect.prototype.$anchor=null;TrackRectInRect.prototype.isValid=function(){return BaseObject.is(this.$inner,"GRect")&&BaseObject.is(this.$outer,"GRect")&&BaseObject.is(this.$anchor,"GPoint");};TrackRectInRect.prototype.trackPoint=function(pt){if(this.isValid()){var possibleRect=this.$outer.innerSpaceForAnchoredRectangle(this.$inner,this.$anchor);if(possibleRect!=null&&possibleRect.isValid()){var pt=possibleRect.mapToInsides(pt);pt=pt.subtract(this.$anchor);return pt.mapFromTo(null,this.$outer);}}return null;};})();