function IProcessAcceleratorsImpl(){}IProcessAcceleratorsImpl.InterfaceImpl(IProcessAccelerators,"IProcessAcceleratorsImpl");IProcessAcceleratorsImpl.RequiredTypes("Base","AppBase");IProcessAcceleratorsImpl.prototype.acceleratorExecutor=function(e){var self=this.activeClass;var isChar=true;var modifiers={ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey,meta:false};if(typeof e.which!=='number'){e.which=e.keyCode;}if(IProcessAccelerators.$accMap[e.which]){character=IProcessAccelerators.$accMap[e.which];isChar=false;}else{var character=String.fromCharCode(e.which);if(!e.shiftKey){character=character.toLowerCase();}}if(isChar){this.activeClass.acceleratorbuffer+=character;}else{var tmp="";for(var prop in modifiers){if(modifiers[prop]==true){tmp+=prop+"+";}}this.activeClass.acceleratorbuffer+=tmp+character;}var keyName=this.activeClass.$generateKeyName(this.activeClass.acceleratorbuffer,modifiers.ctrl,modifiers.alt,modifiers.shift);this.activeClass.processAccelerator({start:function(){e.preventDefault();},"keyName":keyName,"character":character,"modifiers":modifiers,finish:function(){e.stopPropagation();self.acceleratorbuffer="";}});};IProcessAcceleratorsImpl.classInitialize=function(cls,routingTypeName,getParentProc){var answerFromCallback;var processAccCaller=new ProtoCaller("IProcessAccelerators","processAccelerator");if(Class.is(cls,"AppBase")){cls.prototype.processAccelerator=function(keyinfo){this.checkAccelBuffer();if(this.$accelerators[keyinfo.keyName]!=null){keyinfo.start();answerFromCallback=BaseObject.callCallback(this.$accelerators[keyinfo.keyName].callback,this,this.$accelerators[keyinfo.keyName]);keyinfo.finish();alert("Accelerator has been processed by an App. Accel:"+keyinfo.keyName+", "+keyinfo.character);jbTrace.log("Accelerator has been processed by an App. Accel:"+keyinfo.keyName+", "+keyinfo.character);}};}else if(Class.is(cls,"BaseWindow")){cls.ExtendMethod("init",function(){this.root.addEventListener("keydown",this.acceleratorExecutor,true);});cls.prototype.processAccelerator=function(keyinfo){if(this.get_approot()==null||!processAccCaller.invokeOn(this.get_approot(),keyinfo)){this.checkAccelBuffer();if(this.$accelerators[keyinfo.keyName]!=null){keyinfo.start();answerFromCallback=BaseObject.callCallback(this.$accelerators[keyinfo.keyName].callback,this,this.$accelerators[keyinfo.keyName]);keyinfo.finish();jbTrace.log("Accelerator has been processed by an Window. Accel:"+keyinfo.keyName+", "+keyinfo.character);}}};}else if(Class.is(cls,"ViewBase")){cls.ExtendMethod("init",function(){this.root.addEventListener("keydown",this.acceleratorExecutor,true);});cls.prototype.processAccelerator=function(keyinfo){this.checkAccelBuffer();if(this.$accelerators[keyinfo.keyName]!=null){keyinfo.start();answerFromCallback=BaseObject.callCallback(this.$accelerators[keyinfo.keyName].callback,this,this.$accelerators[keyinfo.keyName]);keyinfo.finish();jbTrace.log("Accelerator has been processed by a View. Accel:"+keyinfo.keyName+", "+keyinfo.character);}};}else if(Class.is(cls,"Base")){cls.ExtendMethod("init",function(){this.root.addEventListener("keydown",this.acceleratorExecutor,true);});cls.prototype.processAccelerator=function(keyinfo){this.checkAccelBuffer();if(this.$accelerators[keyinfo.keyName]!=null){keyinfo.start();answerFromCallback=BaseObject.callCallback(this.$accelerators[keyinfo.keyName].callback,this,this.$accelerators[keyinfo.keyName]);keyinfo.finish();jbTrace.log("Accelerator has been processed by an element. Accel:"+keyinfo.keyName+", "+keyinfo.character);}};}};