function LocalProxyContainer(recursionLevel){BaseObject.apply(this,arguments);this.$maxRecursion=recursionLevel||10;}LocalProxyContainer.Inherit(BaseObject,"LocalProxyContainer");LocalProxyContainer.Implement(IManagedInterfaceContainer);LocalProxyContainer.prototype.obliterate=function(){if(!this.__obliterated){this.releaseAll();}BaseObject.prototype.obliterate.call(this);};LocalProxyContainer.prototype.$proxies=new InitializeObject("Proxies register");LocalProxyContainer.prototype.register=function(proxy){return this.registerByTarget(proxy);};LocalProxyContainer.prototype.unregister=function(proxy){var i,result=true;if(BaseObject.is(prxy,"$Managed_BaseProxy")){var proxyClassName=prxy.classType();var proxyClassBranch=this.$proxies[proxyClassName];if(proxyClassBranch!=null){if(BaseObject.is(proxyClassBranch[prxy.$__instanceId],"$Managed_BaseProxy")){delete proxyClassBranch[prxy.$__instanceId];return true;}}return false;}else if(BaseObject.is(prxy,"Array")){for(i=0;i<prxy.length;i++){if(!this.release(prxy[i]))result=false;}}else if(BaseObject.is(prxy,"object")){for(i in prxy){if(prxy.hasOwnProperty(i)){if(!this.release(prxy[i]))result=false;}}}return result;};LocalProxyContainer.prototype.releaseAll=function(prxy_or_prxyclass){var k,kk;if(prxy_or_prxyclass==null){for(k in this.$proxies){if(this.$proxies.hasOwnProperty(k)){for(kk in this.$proxies[k]){if(this.$proxies[k].hasOwnProperty(kk)){if(BaseObject.is(this.$proxies[k][kk],"IManagedInterface")){this.$proxies[k][kk].Release(true);}delete this.$proxies[k][kk];}}delete this.$proxies[k];}}}else{var prxyclass=Class.getClassName(prxy_or_prxyclass);var proxyClassBranch=this.$proxies[prxyclass];if(proxyClassBranch!=null){for(k in proxyClassBranch){if(proxyClassBranch.hasOwnProperty(k)){if(BaseObject.is(proxyClassBranch[k],"IManagedInterface")){proxyClassBranch[k].Release(true);}}}delete this.$proxies[prxyclass];}}};LocalProxyContainer.prototype.release=function(prxy){var i;if(BaseObject.is(prxy,"$Managed_BaseProxy")){var proxyClassName=prxy.classType();var proxyClassBranch=this.$proxies[proxyClassName];if(proxyClassBranch!=null){if(BaseObject.is(proxyClassBranch[prxy.$__instanceId],"$Managed_BaseProxy")){proxyClassBranch[prxy.$__instanceId].Release(true);delete proxyClassBranch[prxy.$__instanceId];return;}}prxy.Release();}else if(BaseObject.is(prxy,"Array")){for(i=0;i<prxy.length;i++){this.release(prxy[i]);}}else if(BaseObject.is(prxy,"object")){for(i in prxy){if(prxy.hasOwnProperty(i)){this.release(prxy[i]);}}}};LocalProxyContainer.prototype.registerProxy=function(prxy){if(BaseObject.is(prxy,"$Managed_BaseProxy")){var proxyClassName=prxy.classType();var proxyClassBranch=this.$proxies[proxyClassName];if(proxyClassBranch==null){proxyClassBranch=this.$proxies[proxyClassName]={};}proxyClassBranch[prxy.$__instanceId]=prxy;prxy.$container=this;return prxy;}return null;};LocalProxyContainer.prototype.registerByTarget=function(prxy,_level){var level=_level||1;if(level>this.$maxRecursion)return null;var i,p;if(BaseObject.is(prxy,"$Managed_BaseProxy")){var target=DummyInterfaceProxyBuilder.Dereferece(prxy);var proxyClassName=prxy.classType();var proxyClassBranch=this.$proxies[proxyClassName];if(proxyClassBranch==null){proxyClassBranch=this.$proxies[proxyClassName]={};proxyClassBranch[prxy.$__instanceId]=prxy;prxy.$container=this;return prxy;}for(var k in proxyClassBranch){if(proxyClassBranch.hasOwnProperty(k)){var _target=DummyInterfaceProxyBuilder.Dereferece(proxyClassBranch[k]);if(target==_target){prxy.Release();return proxyClassBranch[k];}}}proxyClassBranch[prxy.$__instanceId]=prxy;return prxy;}else if(BaseObject.is(prxy,"Array")){for(i=0;i<prxy.length;i++){p=this.registerByTarget(prxy[i],level+1);if(p!=null)prxy[i]=p;}return prxy;}else if(prxy!=null&&BaseObject.is(prxy,"object")){for(i in prxy){if(prxy.hasOwnProperty(i)){p=this.registerByTarget(prxy[i],level+1);if(p!=null){prxy[i]=p;}}}return prxy;}return null;};LocalProxyContainer.prototype.releaseTarget=function(target_proxy){var target=DummyInterfaceProxyBuilder.Dereferece(target_proxy);if(BaseObject.is(target,"BaseObject")){var k,kk,_target;for(k in this.$proxies){if(this.$proxies.hasOwnProperty(k)){for(kk in this.$proxies[k]){if(this.$proxies[k].hasOwnProperty(kk)){if(BaseObject.is(this.$proxies[k][kk],"IManagedInterface")){_target=DummyInterfaceProxyBuilder.Dereferece(this.$proxies[k][kk]);if(_target==target){this.$proxies[k][kk].Release(true);delete this.$proxies[k][kk];}}}}}}}};