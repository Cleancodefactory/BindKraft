function IUsingLocalAPIImpl(){}IUsingLocalAPIImpl.InterfaceImpl(IUsingLocalAPI,"IUsingLocalAPIImpl");IUsingLocalAPIImpl.RequiredTypes("AppBase");IUsingLocalAPIImpl.inheritorInitialize=function(cls,parentCls){if(parentCls.__$localAPIInjects!=null){cls.__$localAPIInjects=BaseObject.CombineObjects(parentCls.__$localAPIInjects);}if(parentCls.__$localAPIImports!=null){cls.__$localAPIImports=BaseObject.CombineObjects(parentCls.__$localAPIImports);}};IUsingLocalAPIImpl.classInitialize=function(cls,apiimports){CompileTime.warn("IUsingLocalAPIImpl is obsolete from BK 2.18, please use AppGate to access and record local API refs. Compiling: "+Class.getClassName(cls));var clientFieldName="__$localAPIClient";if(cls.__$localAPIImports==null){cls.__$localAPIImports={};}if(apiimports!=null){if(typeof apiimports=="object"){cls.__$localAPIImports=BaseObject.CombineObjects(cls.__$localAPIImports,apiimports);}else if(typeof apiimports=="string"){var arr=apiimports.split(",");if(arr!=null&&arr.length>0){cls.__$localAPIImports={};for(var i=0;i<arr.length;i++){cls.__$localAPIImports[arr[i]]=null;}}}}cls.prototype.getLocalAPIImportDefinition=function(){return cls.__$localAPIImports;};cls.prototype.setLocalAPIClient=function(clnt){if(BaseObject.is(this[clientFieldName],"LocalAPIClient")){throw"System error - setLocalAPIClient has been called to set different client - the client cannot be changed due to the DI behavior";}if(BaseObject.is(clnt,"LocalAPIClient")){this[clientFieldName]=clnt;this.LocalAPI=clnt.API;var _inj=_injects();for(var k in _inj){if(this[k]==null){this[k]=this.LocalAPI[_inj[k]];}else{CompileTime.warn("Injection into field "+k+" failed because it was not empty. Unpredictable runtime errors may occur");}}}else if(clnt==null){}else{throw"setLocalAPIClient has been called with invalid argument - expected LocalAPIClient";}};function _injects(){if(cls.__$localAPIInjects==null){cls.__$localAPIInjects={};}return cls.__$localAPIInjects;}function _import(iface,variation){var imps=cls.__$localAPIImports;if(imps==null){throw"Local API imports list is missing unexpectedly - system level error";}var ifacename=Class.getInterfaceName(iface);if(ifacename in imps){if(variation!=null&&variation!=imps[ifacename]){CompileTime.warn("The requested variation "+variation+" is different from the previousy declared (e.g. in an inherited class) "+imps[variation]+" for Local API interface "+ifacename);}}else{imps[ifacename]=variation;}}cls.ImportLocalAPI=function(field_name,iface,variation){_import(iface,variation);var ifacename=Class.getInterfaceName(iface);if(ifacename==null){CompileTime.warn("ImportLocalAPI cannot find interface declaration");}var _inj=_injects();if(PatternChecker.IdentName.checkValue(field_name)){_inj[field_name]=ifacename;}else{CompileTime.warn("ImportLocalAPI -> Trying to inject local API "+ifacename+" in a field with unusable name "+field_name);}return this;};};